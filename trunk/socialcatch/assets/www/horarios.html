<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Horários</title>

<link rel="stylesheet" type="text/css"
	href="lib/resources/css/sencha-touch.css" />
<script type="text/javascript" src="lib/sencha-touch.js"></script>
</head>
<body>
	<script type="text/javascript">
	var search = window.location.search;
	
	var coord = search.substr(1).split("&");
	var latitude = coord[0].replace("latitude=", "");
	var longitude = coord[1].replace("longitude=", "");	
	var fbId= coord[2].replace("id=", "");
	var placeId = coord[3].replace("placeid=","");
	
		var horariosBraga = new Array();
		var horariosGMR = new Array();
		var agora = new Date();
		var horas = agora.getHours();
		var minutos = agora.getMinutes();

		function preencherHorarioB() {

			var horarios = new Object();
			horarios.hora = 8;
			horarios.min = 00;
			horarios.desc = "AE via Avenida";

			
			horariosBraga[0] = horarios;

			var horarios = new Object();
			horarios.hora = 8;
			horarios.min = 00;
			horarios.desc = "AE Directo";

			//if (horas <= horarios.hora)
				horariosBraga[1] = horarios;

			var horarios = new Object();
			horarios.hora = 8;
			horarios.min = 10;
			horarios.desc = "via Hospital GMR - Não para na GALP";

			//if (horas <= horarios.hora)
				horariosBraga[2] = horarios;

			var horarios = new Object();
			horarios.hora = 8;
			horarios.min = 25;
			horarios.desc = "AE Directo";

			//if (horas <= horarios.hora)
				horariosBraga[3] = horarios;

			var horarios = new Object();
			horarios.hora = 8;
			horarios.min = 25;
			horarios.desc = "AE via Avenida";

			//if (horas <= horarios.hora)
				horariosBraga[4] = horarios;

			var horarios = new Object();
			horarios.hora = 9;
			horarios.min = 10;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosBraga[5] = horarios;

			var horarios = new Object();
			horarios.hora = 10;
			horarios.min = 10;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosBraga[6] = horarios;

			var horarios = new Object();
			horarios.hora = 12;
			horarios.min = 0;
			horarios.desc = "AE via Avenida";

			//if (horas <= horarios.hora)
				horariosBraga[7] = horarios;

			var horarios = new Object();
			horarios.hora = 12;
			horarios.min = 20;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosBraga[8] = horarios;

			var horarios = new Object();
			horarios.hora = 13;
			horarios.min = 00;
			horarios.desc = "AE via Hospital de GMR";

			//if (horas <= horarios.hora)
				horariosBraga[9] = horarios;

			var horarios = new Object();
			horarios.hora = 13;
			horarios.min = 10;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosBraga[10] = horarios;

			var horarios = new Object();
			horarios.hora = 13;
			horarios.min = 30;
			horarios.desc = "AE via Avenida";

			//if (horas <= horarios.hora)
				horariosBraga[11] = horarios;

			var horarios = new Object();
			horarios.hora = 15;
			horarios.min = 10;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosBraga[12] = horarios;

			var horarios = new Object();
			horarios.hora = 16;
			horarios.min = 10;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosBraga[13] = horarios;

			var horarios = new Object();
			horarios.hora = 16;
			horarios.min = 30;
			horarios.desc = "AE via Avenida";

			//if (horas <= horarios.hora)
				horariosBraga[14] = horarios;

			var horarios = new Object();
			horarios.hora = 17;
			horarios.min = 30;
			horarios.desc = "AE via PSP";

			//if (horas <= horarios.hora)
				horariosBraga[15] = horarios;

			var horarios = new Object();
			horarios.hora = 18;
			horarios.min = 00;
			horarios.desc = "AE Directo";

			//if (horas <= horarios.hora)
				horariosBraga[16] = horarios;

			var horarios = new Object();
			horarios.hora = 18;
			horarios.min = 10;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosBraga[17] = horarios;

			var horarios = new Object();
			horarios.hora = 19;
			horarios.min = 10;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosBraga[18] = horarios;

			var horarios = new Object();
			horarios.hora = 20;
			horarios.min = 10;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosBraga[19] = horarios;

			var horarios = new Object();
			horarios.hora = 22;
			horarios.min = 10;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosBraga[20] = horarios;

		}
		
		function preencherHorarioG() {

			var horarios = new Object();
			horarios.hora = 7;
			horarios.min = 20;
			horarios.desc = "";

			
			horariosGMR[0] = horarios;

			var horarios = new Object();
			horarios.hora = 8;
			horarios.min = 00;
			horarios.desc = "AE via PSP";

			//if (horas <= horarios.hora)
				horariosGMR[1] = horarios;

			var horarios = new Object();
			horarios.hora = 8;
			horarios.min = 10;
			horarios.desc = "Não passa na PSP";

			//if (horas <= horarios.hora)
				horariosGMR[2] = horarios;

			var horarios = new Object();
			horarios.hora = 8;
			horarios.min = 25;
			horarios.desc = "AE via PSP";

			//if (horas <= horarios.hora)
				horariosGMR[3] = horarios;

			var horarios = new Object();
			horarios.hora = 8;
			horarios.min = 25;
			horarios.desc = "AE Directo";

			//if (horas <= horarios.hora)
				horariosGMR[4] = horarios;

			var horarios = new Object();
			horarios.hora = 9;
			horarios.min = 10;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosGMR[5] = horarios;

			var horarios = new Object();
			horarios.hora = 10;
			horarios.min = 10;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosGMR[6] = horarios;

			var horarios = new Object();
			horarios.hora = 12;
			horarios.min = 20;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosGMR[7] = horarios;

			var horarios = new Object();
			horarios.hora = 12;
			horarios.min = 30;
			horarios.desc = "AE via Avenida";

			//if (horas <= horarios.hora)
				horariosGMR[8] = horarios;

			var horarios = new Object();
			horarios.hora = 13;
			horarios.min = 00;
			horarios.desc = "AE via Hospital de GMR";

			//if (horas <= horarios.hora)
				horariosGMR[9] = horarios;

			var horarios = new Object();
			horarios.hora = 13;
			horarios.min = 10;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosGMR[10] = horarios;

			var horarios = new Object();
			horarios.hora = 13;
			horarios.min = 30;
			horarios.desc = "AE Directo";

			//if (horas <= horarios.hora)
				horariosGMR[11] = horarios;

			var horarios = new Object();
			horarios.hora = 15;
			horarios.min = 10;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosGMR[12] = horarios;

			var horarios = new Object();
			horarios.hora = 16;
			horarios.min = 10;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosGMR[13] = horarios;

			var horarios = new Object();
			horarios.hora = 17;
			horarios.min = 00;
			horarios.desc = "AE Directo";

			//if (horas <= horarios.hora)
				horariosGMR[14] = horarios;

			var horarios = new Object();
			horarios.hora = 17;
			horarios.min = 10;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosGMR[15] = horarios;

			var horarios = new Object();
			horarios.hora = 18;
			horarios.min = 10;
			horarios.desc = "AE via Avenida";

			//if (horas <= horarios.hora)
				horariosGMR[16] = horarios;

			var horarios = new Object();
			horarios.hora = 18;
			horarios.min = 10;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosGMR[17] = horarios;

			var horarios = new Object();
			horarios.hora = 19;
			horarios.min = 10;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosGMR[18] = horarios;

			var horarios = new Object();
			horarios.hora = 20;
			horarios.min = 10;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosGMR[19] = horarios;

			var horarios = new Object();
			horarios.hora = 22;
			horarios.min = 10;
			horarios.desc = "";

			//if (horas <= horarios.hora)
				horariosGMR[20] = horarios;

		}


		Ext.setup({

			onReady : function() {

				var braga, guimaraes;
				preencherHorarioB();
				preencherHorarioG();
				braga = new Ext.Component({
					title : "Braga",
					scroll : 'vertical',
					tpl : [ '<tpl for="."  >', '<div style="margin-top:3px">',
							'<h2>{hora}h{min}m <b>{desc}</b></h2>', '<hr>',
							'</div>', '</tpl>' ]

				});

				guimaraes = new Ext.Component({
					title : "Guimarães",
					scroll : 'vertical',
					tpl : [ '<tpl for="."  >', '<div style="margin-top:3px">',
							'<h2>{hora}h{min}m <b>{desc}</b></h2>', '<hr>',
							'</div>', '</tpl>' ]

				});
				
				var buttonsSpecBottom = [ {
					ui : 'back',
					text : 'Sair'
				} ]

				var tapHandler = function(btn, evt) {
					//alert("Button '" + btn.text + "' tapped.");
                    window.location.href = "mural.html?latitude=" + latitude
					+ "&longitude=" + longitude + "&id="+fbId + "&placeid="+placeId;
     
					
				}
				
				var dockedItems = [ {
					xtype : 'toolbar',
					ui : 'dark',
					dock : 'bottom',
					items : buttonsSpecBottom,
					defaults : {
						handler : tapHandler
					}
				} ]

				var panel = new Ext.TabPanel({
					fullscreen : true,
					animation : 'slide',
					items : [ braga, guimaraes ],
					dockedItems : dockedItems
				});

				braga.update(horariosBraga);
				guimaraes.update(horariosGMR);
			}
		});
	</script>
</body>
</html>